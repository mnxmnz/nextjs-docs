# Navigating Between Pages

## 1. Automatic code-splitting and prefetching

서버 컴포넌트를 사용하면 애플리케이션을 라우트 세그먼트별로 코드 스플리팅한다.

- 각 페이지는 독립적으로 동작한다. 특정 페이지에서 오류가 발생해도 애플리케이션의 다른 페이지는 정상적으로 작동한다.
- 클라이언트에서는 라우트 세그먼트를 미리 가져와 캐시한다.

Next.js 는 Router Cache 라는 메모리 내 클라이언트 측 캐시를 가지고 있다.

- Router Cache 는 레이아웃, 로딩 상태, 페이지로 구분된 라우트 세그먼트의 RSC 페이로드를 저장한다.
- 브라우저의 메모리에 임시로 저장되는 캐시 저장소이다.
- 페이지 이동 시 캐시를 최대한 재사용하여 서버 요청을 줄이고 데이터 전송량을 감소하여 성능을 향상할 수 있다.
- 로딩 상태도 캐시되어 즉각적인 페이지 전환에 재사용된다.
- `revalidate` 옵션을 통해 페이지 세그먼트의 캐싱을 제어할 수 있다.

`<Link>` 컴포넌트는 뷰포트에 나타날 때 자동으로 프리패칭을 시작한다.

- 프로덕션 환경에서만 프리패칭이 활성화된다.
- 정적 라우트의 경우 모든 리소스를 프리패칭한다.
- 동적 라우트의 경우 `loading.js` 파일과 함께 레이아웃까지 프리패칭한다.

```
app/
├── dashboard/
│   ├── layout.js
│   ├── loading.js <- 첫 번째 loading.js
│   ├── page.js
│   └── settings/
│       ├── loading.js
│       └── page.js
```

기본 프리패칭 범위는 다음과 같다.

- `<Link>` 컴포넌트가 `/dashboard/settings` 로 향하는 경우 첫 번째 `loading.js` 지점까지만 프리패칭한다.
- 프리패칭한 데이터는 세션 동안만 유지되며 페이지를 새로고침하면 초기화된다.

> [Quiz](./quiz.md)
